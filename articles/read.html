<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tfevents">
<title>Reading event records • tfevents</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reading event records">
<meta property="og:description" content="tfevents">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tfevents</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Guides</h6>
    <a class="dropdown-item" href="../articles/images.html">Writing images</a>
    <a class="dropdown-item" href="../articles/hparams.html">Hyperparameter tuning</a>
    <a class="dropdown-item" href="../articles/read.html">Reading event records</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/examples/torch.html">Logging torch runs</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlverse/tfevents/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Reading event records</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlverse/tfevents/blob/HEAD/vignettes/articles/read.Rmd" class="external-link"><code>vignettes/articles/read.Rmd</code></a></small>
      <div class="d-none name"><code>read.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mlverse/tfevents" class="external-link">tfevents</a></span><span class="op">)</span></span></code></pre></div>
<p>tfevents stores events in files inside a <strong>logdir</strong>,
there might be many files tfevents records files in the log directory
and each file can contain many events.</p>
<p>tfevents provides functionality to read records writen to the log
directory and to extract their value in a convenient representation,
useful if you want to analyse the results from R.</p>
<p>Let’s write a few records a temporary directory, then we’ll use
tfevents functionality to read the data into R.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/get_default_logdir.html">set_default_logdir</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/log_event.html">log_event</a></span><span class="op">(</span>text <span class="op">=</span> <span class="st">"hello world"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/log_event.html">log_event</a></span><span class="op">(</span>hello <span class="op">=</span> <span class="va">i</span><span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>We can <strong>collect</strong> all events from the <em>logdir</em>
with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">events</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span><span class="va">events</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;         event run    step    summary</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts_s&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     &lt;./ 0&gt; .         0           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     &lt;./ 0&gt; .         0        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     &lt;./ 1&gt; .         1        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     &lt;./ 2&gt; .         2        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     &lt;./ 3&gt; .         3        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     &lt;./ 4&gt; .         4        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     &lt;./ 5&gt; .         5        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     &lt;./ 6&gt; .         6        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     &lt;./ 7&gt; .         7        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     &lt;./ 8&gt; .         8        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     &lt;./ 9&gt; .         9        <span style="color: #949494;">[1]</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     &lt;./10&gt; .        10        <span style="color: #949494;">[1]</span></span></span></code></pre></div>
<p><code><a href="../reference/collect_events.html">collect_events()</a></code> returns a tibble with each row
repesenting an event writen to that <em>logdir</em>. Note that the
tibble has 12 rows, 1 more than the number of our calls to
<code>log_event</code>. That’s because every event record file includes
an event storing some metadata, like the time it was created and etc.
The <code>run</code> column indicates the directory within the
<em>logdir</em> that the events were collected from. Although tfevents
only supports writing summary events, tfevents record files can contain
other kind of events like log message, TensorFlow graphs and metadata
information (as we see in this file), in those cases the
<code>summary</code> column will have a <code>NA</code> value. In
summary events it will contain additional information on the
summary.</p>
<p>You might want to collect only the summary events, like those that
were created with <code>log_event</code>, in this case you can pass the
<code>type</code> argument to <code>collect_events</code> specifying the
kind of events that you want to collect.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">temp</span>, type <span class="op">=</span> <span class="st">"summary"</span><span class="op">)</span></span>
<span><span class="va">summaries</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;         event run    step    summary tag   plugin </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts__&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     &lt;./ 0&gt; .         0     &lt;text&gt; text  text   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     &lt;./ 1&gt; .         1    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     &lt;./ 2&gt; .         2    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     &lt;./ 3&gt; .         3    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     &lt;./ 4&gt; .         4    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     &lt;./ 5&gt; .         5    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     &lt;./ 6&gt; .         6    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     &lt;./ 7&gt; .         7    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     &lt;./ 8&gt; .         8    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     &lt;./ 9&gt; .         9    &lt;hello&gt; hello scalars</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     &lt;./10&gt; .        10    &lt;hello&gt; hello scalars</span></span></code></pre></div>
<p>Since the above asked for summary events, the returned data frame can
include additional information like the name of the plugin that was used
to created the summary (eg. scalars, images, audio, etc) and the tag
name for the summary. This data is already included in the objects in
the <code>summary</code> column, but is extracted as columns to make
analyses easier.</p>
<p>You can extract the value out of a summary using the
<code>value</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">summaries</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "hello world"</span></span></code></pre></div>
<p>Notice that <code>value</code> extracts values of a single summary
and errors if you pass more summary values. To query all values you can
pass the <code>as_list = TRUE</code> argument. This ensures that
<code>value</code> will always return a list, making it type stable no
matter the size of the summary_values vector that you pass.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we remove the first summary, as it's a text summary</span></span>
<span><span class="fu"><a href="../reference/value.html">value</a></span><span class="op">(</span><span class="va">summaries</span><span class="op">$</span><span class="va">summary</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, as_list <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 0.08075014</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 1.668666</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] 1.802283</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; [1] 0.6288338</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] 0.03699721</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[6]]</span></span>
<span><span class="co">#&gt; [1] 2.798361</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[7]]</span></span>
<span><span class="co">#&gt; [1] 3.484442</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[8]]</span></span>
<span><span class="co">#&gt; [1] 2.318138</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[9]]</span></span>
<span><span class="co">#&gt; [1] 6.595938</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[10]]</span></span>
<span><span class="co">#&gt; [1] 7.725215</span></span></code></pre></div>
<p>If you are only interested in scalar summaries, you can use
<code>type="scalar"</code> in <code>collect_events</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scalars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">temp</span>, type <span class="op">=</span> <span class="st">"scalar"</span><span class="op">)</span></span>
<span><span class="va">scalars</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 7</span></span></span>
<span><span class="co">#&gt;         event run    step    summary tag   plugin   value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts__&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     &lt;./ 1&gt; .         1    &lt;hello&gt; hello scalars 0.080<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     &lt;./ 2&gt; .         2    &lt;hello&gt; hello scalars 1.67  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     &lt;./ 3&gt; .         3    &lt;hello&gt; hello scalars 1.80  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     &lt;./ 4&gt; .         4    &lt;hello&gt; hello scalars 0.629 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     &lt;./ 5&gt; .         5    &lt;hello&gt; hello scalars 0.037<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     &lt;./ 6&gt; .         6    &lt;hello&gt; hello scalars 2.80  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     &lt;./ 7&gt; .         7    &lt;hello&gt; hello scalars 3.48  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     &lt;./ 8&gt; .         8    &lt;hello&gt; hello scalars 2.32  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     &lt;./ 9&gt; .         9    &lt;hello&gt; hello scalars 6.60  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     &lt;./10&gt; .        10    &lt;hello&gt; hello scalars 7.73</span></span></code></pre></div>
<p>Now, values can be expanded in the data frame and you get a ready to
use data frame, for example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">scalars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">step</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="read_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="section level2">
<h2 id="iterating-over-a-logdir">Iterating over a logdir<a class="anchor" aria-label="anchor" href="#iterating-over-a-logdir"></a>
</h2>
<p>Passing a directory path to <code>collect_events</code> by default
collects all events in that directory, but you might not want to collect
them all at once because of memory constraints or even because they are
not yet written, in this case you can use <code>events_logdir</code> to
create an object, similar to a file connection that will allow you to
load events in smaller batches.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collect_events.html">events_logdir</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">con</span>, n <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"scalar"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 7</span></span></span>
<span><span class="co">#&gt;        event run    step    summary tag   plugin   value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts__&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>      &lt;./1&gt; .         1    &lt;hello&gt; hello scalars 0.080<span style="text-decoration: underline;">8</span></span></span></code></pre></div>
<p>Notice that the first call to <code>collect_events</code> collected
the first scalar summary event in the directory because of
<code>n = 1</code>. The next call will collect the remaining ones as by
default <code>n = NULL</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">con</span>, type <span class="op">=</span> <span class="st">"scalar"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 7</span></span></span>
<span><span class="co">#&gt;        event run    step    summary tag   plugin   value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts__&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     &lt;./ 2&gt; .         2    &lt;hello&gt; hello scalars 1.67  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     &lt;./ 3&gt; .         3    &lt;hello&gt; hello scalars 1.80  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     &lt;./ 4&gt; .         4    &lt;hello&gt; hello scalars 0.629 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     &lt;./ 5&gt; .         5    &lt;hello&gt; hello scalars 0.037<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     &lt;./ 6&gt; .         6    &lt;hello&gt; hello scalars 2.80  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     &lt;./ 7&gt; .         7    &lt;hello&gt; hello scalars 3.48  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>     &lt;./ 8&gt; .         8    &lt;hello&gt; hello scalars 2.32  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>     &lt;./ 9&gt; .         9    &lt;hello&gt; hello scalars 6.60  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span>     &lt;./10&gt; .        10    &lt;hello&gt; hello scalars 7.73</span></span></code></pre></div>
<p>We can now log some more scalars and recollect, you will see that the
events that were just written are now collected.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/log_event.html">log_event</a></span><span class="op">(</span>hello <span class="op">=</span> <span class="va">i</span><span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="../reference/collect_events.html">collect_events</a></span><span class="op">(</span><span class="va">con</span>, type <span class="op">=</span> <span class="st">"scalar"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">#&gt;        event run    step    summary tag   plugin  value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;tfvnts_v&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;tfvnts__&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     &lt;./11&gt; .        11    &lt;hello&gt; hello scalars 0.875</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     &lt;./12&gt; .        12    &lt;hello&gt; hello scalars 0.350</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     &lt;./13&gt; .        13    &lt;hello&gt; hello scalars 0.103</span></span></code></pre></div>
<p>This interface allows you to efficiently read tfevents records
without having them all on RAM at once, or work in a streaming way in a
sense that a process might be writing tfevents (for example in a
training loop) and another one is used to display intermediate results -
for example in a Shiny app.</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Falbel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
